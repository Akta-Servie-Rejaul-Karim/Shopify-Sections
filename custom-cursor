<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Smart Cursor Test</title>
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
        background: #f9f9f9;
      }

      section {
        padding: 100px 40px;
        border-bottom: 1px solid #ccc;
      }

      h2 {
        margin-top: 0;
      }

      button,
      a,
      input {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        display: inline-block;
      }

      a {
        text-decoration: none;
        color: blue;
      }

      input {
        border: 1px solid #aaa;
      }

      /* Custom cursor styles */
      .cursor-dot,
      .cursor-outer {
        position: fixed;
        left: 0;
        top: 0;
        pointer-events: none;
        border-radius: 50%;
        transform: translateZ(0);
        z-index: 9999;
        mix-blend-mode: difference; /* <--- This makes the magic happen */
      }

      .cursor-dot {
        width: 8px;
        height: 8px;
        background-color: #fff;
        transition:
          width 0.3s ease-in-out,
          height 0.3s ease-in-out,
          margin 0.3s ease-in-out,
          opacity 0.3s ease-in-out;
      }

      .cursor-dot.cursor-hover {
        margin-left: -35px;
        margin-top: -35px;
        width: 75px;
        height: 75px;
        background-color: #fff;
      }

      .cursor-outer {
        margin-left: -18px;
        margin-top: -18px;
        width: 40px;
        height: 40px;
        background: #fff;
        box-sizing: border-box;
        transform: scale(1);
        transition: all 0.6s ease-out;
      }

      .cursor-outer.cursor-hover {
        transform: scale(2);
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <div class="cursor-dot"></div>
    <div class="cursor-outer"></div>

    <section>
      <h2>Section 1: Introduction</h2>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque auctor.
      </p>
      <a href="#">Read More</a>
    </section>

    <section style="background: #000; color: #fff">
      <h2>Section 2: Dark Background</h2>
      <p>This section has a dark background to show cursor inversion.</p>
      <button>Click Me</button>
    </section>

    <section>
      <h2>Section 3: Form</h2>
      <p>Fill in the fields below:</p>
      <input type="text" placeholder="Enter your name" />
      <input type="email" placeholder="Enter your email" />
    </section>

    <section style="background: red; color: white">
      <h2>Section 4: Red Background</h2>
      <p>Observe cursor inverting against red background.</p>
      <img
        src="https://images.unsplash.com/photo-1754147388611-c0f0179a05b5?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
        alt="Sample image"
      />
    </section>

    <section>
      <h2>Section 5: Features</h2>
      <ul>
        <li>Fast</li>
        <li>Customizable</li>
        <li>Lightweight</li>
      </ul>
    </section>

    <section>
      <h2>Section 6: Footer</h2>
      <p>Contact us or follow on social media.</p>
      <a href="#">Facebook</a>
      <a href="#">Twitter</a>
    </section>

    <script>
      // Utility function
      function setPosition(el, x, y) {
        el.style.left = `${x}px`;
        el.style.top = `${y}px`;
      }

      // Smart Cursor class
      class SmartCursor {
        constructor(dotSelector, outerSelector, easing = 0.2) {
          this.dot = document.querySelector(dotSelector);
          this.outer = document.querySelector(outerSelector);

          this.mouseX = 0;
          this.mouseY = 0;
          this.outerX = 0;
          this.outerY = 0;
          this.easing = easing;

          this.init();
        }

        init() {
          document.addEventListener(
            "mousemove",
            this.handleMouseMove.bind(this)
          );
          requestAnimationFrame(this.animate.bind(this));
          this.addHoverEffects();
        }

        handleMouseMove(e) {
          this.mouseX = e.clientX;
          this.mouseY = e.clientY;
        }

        animate() {
          setPosition(this.dot, this.mouseX, this.mouseY);

          this.outerX += (this.mouseX - this.outerX) * this.easing;
          this.outerY += (this.mouseY - this.outerY) * this.easing;
          setPosition(this.outer, this.outerX, this.outerY);

          requestAnimationFrame(this.animate.bind(this));
        }

        addHoverEffects() {
          const hoverables = document.querySelectorAll("a, button, input");

          hoverables.forEach((el) => {
            el.addEventListener("mouseenter", () => {
              this.dot.classList.add("cursor-hover");
              this.outer.classList.add("cursor-hover");
            });

            el.addEventListener("mouseleave", () => {
              this.dot.classList.remove("cursor-hover");
              this.outer.classList.remove("cursor-hover");
            });
          });
        }
      }

      // Initialize the smart cursor
      new SmartCursor(".cursor-dot", ".cursor-outer");
    </script>
  </body>
</html>
